<?xml version='1.0' encoding='UTF-8'?>
<xwikidoc version="1.1">
  <web>RISCOSSPlatformCode</web>
  <name>CreateFromGithubGroovy</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1430839815000</creationDate>
  <parent>xwiki:XWiki.WebHome</parent>
  <author>xwiki:XWiki.superadmin</author>
  <contentAuthor>xwiki:XWiki.superadmin</contentAuthor>
  <date>1442967713000</date>
  <contentUpdateDate>1442967629000</contentUpdateDate>
  <version>1.66</version>
  <title/>
  <comment>Imported from XAR</comment>
  <minorEdit>true</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>false</hidden>
  <content>/* -*- Mode:Java */&#xd;
import java.util.regex.Pattern;&#xd;
import java.net.URLEncoder;&#xd;
&#xd;
public class CreateFromGithubGroovy&#xd;
{&#xd;
    private final Pattern regex =&#xd;
        Pattern.compile('^https://github.com/[a-zA-Z0-9_\\.-]+/[a-zA-Z0-9_\\.-]+\\.git$');&#xd;
&#xd;
    public boolean isOkGithubURL(String url)&#xd;
    {&#xd;
        return regex.matcher(url).matches();&#xd;
    }&#xd;
&#xd;
    private String encode(String content)&#xd;
    {&#xd;
        return URLEncoder.encode(content).replaceAll("_", "%5F").replaceAll("%2F", "_");&#xd;
    }&#xd;
&#xd;
    public String docNameForGithubURL(String url, userName="")&#xd;
    {&#xd;
        // 20 == ("https://github.com/").length&#xd;
        // 4 == (".git").length&#xd;
        url = url.substring(19, url.length() - 4);&#xd;
        if(userName != ""){&#xd;
           return "RISCOSSPlatformEntities" + userName + "." + encode(url);&#xd;
        }&#xd;
        else&#xd;
        {&#xd;
           return "RISCOSSPlatformEntities." + encode(url);&#xd;
        }&#xd;
    }&#xd;
&#xd;
    public String titleForGithubURL(String url)&#xd;
    {&#xd;
        return encode(url.substring(19, url.length() - 4));&#xd;
    }&#xd;
}&#xd;
</content>
</xwikidoc>