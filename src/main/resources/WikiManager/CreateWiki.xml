<?xml version='1.0' encoding='UTF-8'?>
<xwikidoc version="1.1">
  <web>WikiManager</web>
  <name>CreateWiki</name>
  <language/>
  <defaultLanguage/>
  <translation>0</translation>
  <creator>xwiki:XWiki.Admin</creator>
  <creationDate>1429197414000</creationDate>
  <parent>WikiManager.WebHome</parent>
  <author>xwiki:XWiki.Admin</author>
  <contentAuthor>xwiki:XWiki.Admin</contentAuthor>
  <date>1308816032000</date>
  <contentUpdateDate>1308816032000</contentUpdateDate>
  <version>1.1</version>
  <title>$services.localization.render('platform.wiki.create.title')</title>
  <comment>Imported from XAR</comment>
  <minorEdit>false</minorEdit>
  <syntaxId>xwiki/2.1</syntaxId>
  <hidden>true</hidden>
  <content>{{velocity}}
#######################################################
##         Create a new (sub)wiki - WIZARD
##
## This wizard let user create a new wiki.
## The 'controller' macro call the good submacro
## depending on the step
##
#######################################################
#########################
## STYLE
#########################
#set($docextras = {})
#########################
## PLUGINS DEPENDENCIES
#########################
#if (!$services.wiki)
  {{error}}{{translation key="platform.wiki.dependencies.wiki.missing"/}}{{/error}}

#end
#if (!$services.applicationmanager)
  {{error}}$services.localization.render('platform.wiki.dependencies.applicationmanager.missing', ['[[', '>>http://extensions.xwiki.org/xwiki/bin/view/Extension/Application+Manager+Plugin]]']){{/error}}

#end
## If all dependancies are OK, we call the controller
#if($services.wiki &amp;&amp; $services.applicationmanager)
  #controller()
#end
##################################
##         CONTROLLER
##################################
#macro(controller)
  #if($request.step == 'members')
    #stepMembers()
  #elseif($request.step == 'create')
    #create()
  #elseif($request.step == 'finalize')
    #set($wikiDescriptor = $services.wiki.getById($request.wikiId))
    #setMembers($wikiDescriptor)
  #elseif($request.step == 'cleanUp')
    #cleanUp()
  #else
    ## Default step
    #stepType()
  #end
#end
##################################
##           HEADER
##
## Display the wizard header
##################################
#macro(wizardHeader $title $currentStepNumber)
  ## Display a step name in the header
  #macro(wizardHeaderStep $name $number $currentStepNumber)
    &lt;li>&lt;span class="number #if($currentStepNumber==$number)active#end">$number&lt;/span> &lt;span class="name #if($currentStepNumber==$number)active#end">$name&lt;/span>&lt;/li>
  #end

  &lt;div class="wizard-header">
    &lt;h1>&lt;span>$title&lt;/span>&lt;/h1>
    #if($currentStepNumber)
      &lt;ul class="steps">
        #wizardHeaderStep($services.localization.render('platform.wiki.create.wizard.step.nameAndType.shortname'), 1, $currentStepNumber)
        #wizardHeaderStep($services.localization.render('platform.wiki.create.wizard.step.users.shortname'), 2, $currentStepNumber)
      &lt;/ul>
    #end
    &lt;div class="clearfloats">&lt;/div>
  &lt;/div>

#end
##################################
##           FOOTER
##
## Display the wizard footer
##################################
#macro(wizardFooter $prev $next $create $finalize $finalizeHidden $cleanUp $cleanupHidden)
  &lt;div class="wizard-footer buttons">
    #if("$!prev" !='')
      &lt;span class="buttonwrapper left">
        &lt;button value="$prev" title="$services.localization.render('platform.wiki.create.wizard.step.previous')" name="step" id="wizard-previous" class="button secondary">$services.localization.render('platform.wiki.create.wizard.step.previous')&lt;/button>
      &lt;/span>
    #end
    #if("$!next" !='')
      &lt;span class="buttonwrapper">
        &lt;button value="$next" title="$services.localization.render('platform.wiki.create.wizard.step.next')" name="step" id="wizard-next" class="button">$services.localization.render('platform.wiki.create.wizard.step.next')&lt;/button>
      &lt;/span>
    #end
    #if("$!create" !='')
      &lt;span class="buttonwrapper">
        &lt;button value="$create" title="$services.localization.render('platform.wiki.create.wizard.step.create')" name="step" id="wizard-create" class="button">$services.localization.render('platform.wiki.create.wizard.step.create')&lt;/button>
      &lt;/span>
    #end
    #if("$!finalize" != '')
      &lt;span class="buttonwrapper">
        &lt;button value="finalize" title="$services.localization.render('platform.wiki.create.wizard.step.provisioning.finalize')" name="step" id="finalize" class="button #if($finalizeHidden)hidden#end">$services.localization.render('platform.wiki.create.wizard.step.provisioning.finalize')&lt;/button>
      &lt;/span>
    #end
    #if("$!cleanUp" != '')
      &lt;span class="buttonwrapper">
        &lt;button value="cleanUp" title="$services.localization.render('platform.wiki.create.wizard.step.provisioning.cleanUp')" name="step" id="cleanUp" class="button #if($cleanupHidden)hidden#end">$services.localization.render('platform.wiki.create.wizard.step.provisioning.cleanUp')&lt;/button>
      &lt;/span>
    #end
  &lt;/div>
#end
##################################
##           REQUIRED
##
## Add a required message
##################################
#macro(required)&lt;span class='xRequired'>($services.localization.render('platform.wiki.form.requiredField'))&lt;/span>#end
##################################
##          STEP TYPE
##
## The type is the first step on the creation
##################################
#macro(stepType)
  #set($discard = $xwiki.ssfx.use('uicomponents/wizard/wizard.css', true))

  {{html}}
    &lt;form class="xform" method="post" action="$doc.getURL()">
      #wizardHeader($services.localization.render('platform.wiki.create.wizard.step.nameAndType'), 1)
      ### WIZARD BODY ###
      &lt;div class="wizard-body">
        ### SECOND STEP VALUES
        &lt;input type="hidden" name="ownerId" value="$!escapetool.xml($request.getParameter('ownerId'))" />
        &lt;input type="hidden" name="membershipType" value="$!escapetool.xml($request.getParameter('membershipType'))" />
        &lt;input type="hidden" name="userScope" value="$!escapetool.xml($request.userScope)" />
        #addMembersAsHiddenInput()
        ### WIZARD FIRST HALF ###
        &lt;div class="half">
          ### PRETTY NAME ###
          &lt;div>
            &lt;dl>
              &lt;dt>
                &lt;label for="prettyname">$services.localization.render('platform.wiki.prop.wikiprettyname')#required()&lt;/label>
                &lt;span class="xHint">$services.localization.render('platform.wiki.create.wizard.desc.wikiprettyname')&lt;/span>
                &lt;span id="wikiprettynamevalidation" class="xErrorMsg">&lt;/span>
              &lt;/dt>
              &lt;dd>
                &lt;input size="60" id="prettyname" name="wikiprettyname" type="text" value="$!escapetool.xml($request.getParameter('wikiprettyname'))"/>
              &lt;/dd>
            &lt;/dl>
          &lt;/div>
          ### WIKI NAME ###
          &lt;div>
            &lt;dl>
              &lt;dt>
                &lt;label for="wikiname">$services.localization.render('platform.wiki.prop.wikiname')#required()&lt;/label>
                &lt;span class='xHint'>$services.localization.render('platform.wiki.create.wizard.desc.wikiname')&lt;/span>
              &lt;/dt>
              &lt;dd>
                &lt;input size="40" id="wikiname" name="wikiname" type="text"  value="$!escapetool.xml($request.wikiname)"/>
                &lt;span id="wikinamevalidation" class="xErrorMsg">&lt;/span>
              &lt;/dd>
            &lt;/dl>
          &lt;/div>
          ### WIKI ALIAS ###
          #if(!$services.wiki.isPathMode())
            &lt;div>
              &lt;dl>
                &lt;dt>
                  &lt;label for="wikialias">$services.localization.render('platform.wiki.prop.wikialias')#required()&lt;/label>
                  &lt;span class='xHint'>$services.localization.render('platform.wiki.create.wizard.desc.wikialias')&lt;/span>
                &lt;/dt>
                &lt;dd>
                  &lt;input size="40" id="wikialias" name="wikialias" type="text"  value="$!escapetool.xml($request.wikialias)"/>
                &lt;/dd>
              &lt;/dl>
            &lt;/div>
          #end
          ### DESCRIPTION ###
          &lt;div>
            &lt;dl>
              &lt;dt>
                &lt;label for="description">$services.localization.render('platform.wiki.prop.description')&lt;/label>
                &lt;span class="xHint">$services.localization.render('platform.wiki.create.wizard.desc.description')&lt;/span>
              &lt;/dt>
              &lt;dd>
                &lt;textarea id="description" name="description" rows="7" cols="45">$!request.getParameter('description')&lt;/textarea>
              &lt;/dd>
            &lt;/dl>
          &lt;/div>
        ### END OF WIZARD FIRST HALF
        &lt;/div>
        ### WIZARD SECOND HALF
        &lt;div class="half">
          ### TEMPLATE ###
          #set ($templates = $services.wiki.template.getTemplates())
          &lt;div>
            &lt;dl>
              &lt;dt>
                #if ($templates.size() > 0)
                  &lt;label for="template">$services.localization.render('platform.wiki.create.wizard.template.label')&lt;/label>
                  &lt;span class="xHint">$services.localization.render('platform.wiki.create.wizard.desc.newTemplateHint')&lt;/span>
                #else
                  &lt;label>$services.localization.render('platform.wiki.create.wizard.template.label')&lt;/label>
                #end
              &lt;/dt>
              &lt;dd>
                #if ($templates.size() > 0)
                  &lt;select name="template" id="template">
                    &lt;option value="xwikinotemplate">$services.localization.render('platform.wiki.create.wizard.template.noTemplate')&lt;/option>
                    #foreach ($template in $templates)
                      #set ($name = $template.id)
                      #if ($stringtool.isNotBlank("$!template.prettyName"))
                        #set($name = "${template.prettyName} (${name})")
                      #end
                      #set($selected = '')
                      #if($request.template == $template.id)
                        #set($selected = 'selected="selected"')
                      #end
                      &lt;option value="${template.id}" $selected>$name&lt;/option>
                    #end
                  &lt;/select>
                #end
              &lt;/dd>
            &lt;/dl>
            &lt;p class="xformInline">
              #set ($isTemplate = '')
              #if ($request.set_as_template == '1')
                #set ($isTemplate = 'checked="checked"')
              #end
              &lt;input type="checkbox" name="set_as_template" id="set_as_template" $isTemplate/>
              &lt;label for="set_as_template" id="label_set_as_template">$services.localization.render('platform.wiki.create.wizard.setAsTemplate.label')&lt;/label>
            &lt;/p>
          &lt;/div>
        ### END OF WIZARD SECOND HALF
        &lt;/div>
      ### END OF WIZARD BODY
      &lt;/div>
      &lt;div class="clearfloats">&lt;/div>
      #wizardFooter('', 'members', '')
    &lt;/form>
  {{/html}}

#end
##################################
##          STEP MEMBERS
##
## The members step is the lasy
##################################
#macro(stepMembers)
#set($discard = $xwiki.ssfx.use('uicomponents/wizard/wizard.css', true))

  {{html}}
    &lt;form class="xform" method="post" action="$doc.getURL()">
      #wizardHeader($services.localization.render('platform.wiki.create.wizard.step.users'), 2)
      ### WIZARD BODY ###
      &lt;div class="wizard-body">
        ### FIRST STEP VALUES
        &lt;input type="hidden" name="wikiprettyname" value="$!escapetool.xml($request.getParameter('wikiprettyname'))" />
        &lt;input type="hidden" name="wikiname" value="$!escapetool.xml($request.wikiname)" />
        &lt;input type="hidden" name="wikialias" value="$!escapetool.xml($request.wikialias)" />
        &lt;input type="hidden" name="description" value="$!escapetool.xml($request.getParameter('description'))" />
        &lt;input type="hidden" name="template" value="$!escapetool.xml($request.template)" />
        &lt;input type="hidden" name="set_as_template" value="$!escapetool.xml($request.set_as_template)" />
        &lt;input type="hidden" name="form_token" value="$!escapetool.xml($services.csrf.getToken())" />
        #userPicker_import(true)
        ### WIZARD FIRST HALF ###
        &lt;div class="half">
          ### OWNER ###
          &lt;div>
            ## Make this section available only to admins, so that only admins can create wikis in the name of other users.
            #if ($hasAdmin)
              &lt;dl>
                &lt;dt>
                  &lt;label for="owner">$services.localization.render('platform.wiki.prop.owner') &lt;span class="xRequired">($services.localization.render('platform.wiki.form.requiredField'))&lt;/span>&lt;/label>
                  &lt;span class="xHint">$services.localization.render('platform.wiki.create.wizard.desc.owner')&lt;/span>
                &lt;/dt>
                &lt;dd>
                  #set($value = $escapetool.xml($request.getParameter('ownerId')))
                  #if("$!value" == "")
                    #set($value = $escapetool.xml($xcontext.user))
                  #end
                  &lt;input type="text" id="owner" name="ownerId" value="$!value" class="suggestUsers"/>
                &lt;/dd>
              &lt;/dl>
            #else
              &lt;input id="owner" name="ownerId" type="hidden" value="${xcontext.mainWikiName}:${xcontext.user}"/>
            #end
          &lt;/div>
          ### USERS SCOPE ###
          &lt;div>
            &lt;dl>
              &lt;dt>
                &lt;label for="userScope">$services.localization.render('platform.wiki.create.wizard.userScope.label')&lt;/label>
                &lt;span class="xHint">$services.localization.render('platform.wiki.create.wizard.userScope.hint')&lt;/span>
              &lt;/dt>
              &lt;dd>
                #set($value = $escapetool.xml($request.getParameter('userScope')))
                #set ($wikiUserClassDocument = $xwiki.getDocument('WikiManager.WikiUserClass'))
                #set ($wikiUserClass = $wikiUserClassDocument.getxWikiClass())
                #set ($userScopeProperty = $wikiUserClass.get('userScope'))
                #set ($userScopePropertyValues = '')
                #set ($userScopePropertyValues = $userScopeProperty.getListValues())
                #set ($userScopeDetailsMap = $userScopeProperty.getMapValues())
                #foreach ($userScopeValue in $userScopePropertyValues)
                  #set ($userScopeValueId = "userScope_${foreach.index}")
                  &lt;div>
                  &lt;label for="$userScopeValueId">
                  #set($checked = '')
                  #if($request.getParameter('userScope') == $userScopeValue || ("$!request.getParameter('userScope')"=='' &amp;&amp; $foreach.index==0))
                    #set($checked = 'checked="checked"')
                  #end
                  &lt;input type="radio" id="$userScopeValueId" name="userScope" value="$userScopeValue" $checked/>
                  $services.localization.render("${wikiUserClassDocument.fullName}_${userScopeProperty.name}_${userScopeDetailsMap.get($userScopeValue).getValue()}")
                  &lt;/label>
                  &lt;/div>
                #end
              &lt;/dd>
            &lt;/dl>
          &lt;/div>
        ### END OF WIZARD FIRST HALF
        &lt;/div>
        ### WIZARD SECOND HALF
        &lt;div class="half">
          ### MEMBERSHIP TYPE
          &lt;div>
            #set ($membershipTypeProperty = $wikiUserClass.get('membershipType'))
            #set ($membershipTypeValues = '')
            #set ($membershipTypeValues = $membershipTypeProperty.getListValues())
            #set ($membershipTypeDetailsMap = $membershipTypeProperty.getMapValues())
            &lt;dl>
              &lt;dt>
                &lt;label>$services.localization.render('platform.wiki.prop.membershipType.label')&lt;/label>
                &lt;span class='xHint'>$services.localization.render('platform.wiki.prop.membershipType.hint')&lt;/span>
              &lt;/dt>
              &lt;dd>
              #foreach ($membershipTypeValue in $membershipTypeValues)
                #set ($membershipTypeValueId = "membershipType_${foreach.index}")
                &lt;div>
                  &lt;label for="$membershipTypeValueId">
                    #set($checked = '')
                    #if($request.getParameter('membershipType') == $membershipTypeValue || ("$!request.getParameter('membershipType')"=='' &amp;&amp; $foreach.index==0))
                      #set($checked = 'checked="checked"')
                    #end
                    &lt;input type="radio" id="$membershipTypeValueId" name="membershipType" value="$membershipTypeValue" $checked/>
                    $services.localization.render("${wikiUserClassDocument.fullName}_${membershipTypeProperty.name}_${membershipTypeDetailsMap.get($membershipTypeValue).getValue()}")
                  &lt;/label>
                &lt;/div>
              #end
              &lt;/dd>
            &lt;/dl>
          &lt;/div>
          ### MEMBERS
          &lt;div>
            &lt;dl>
              &lt;dt>
                &lt;label for="members">$services.localization.render('platform.wiki.create.members')&lt;/label>
                &lt;span class="xHint">$services.localization.render('platform.wiki.create.wizard.desc.members')&lt;/span>
              &lt;/dt>
              &lt;dd>
                #set($listMembers = '')
                #set($sep = '')
                #foreach($m in $request.getParameterValues('members'))
                  #set($listMembers = "${listMembers}${sep}$!escapetool.xml($m)")
                  #set($sep = ',')
                #end
                &lt;input type="text" id="members" name="members" value="$listMembers" class="suggestUsers multipleSelection"/>
              &lt;/dd>
            &lt;/dl>
          &lt;/div>
        ### END OF WIZARD SECOND HALF
        &lt;/div>
      ### END OF WIZARD BODY
      &lt;/div>
      &lt;div class="clearfloats">&lt;/div>
      #if ("$!request.template" == '' || $request.template == 'xwikinotemplate')
        &lt;div class="box infomessage whatnext">
          &lt;p>$services.localization.render('platform.wiki.create.wizard.step.dw')&lt;/p>
        &lt;/div>
      #end
      #wizardFooter('type', '', 'create')
    &lt;/form>
  {{/html}}

#end
##################################
##       GET REQUEST LIST
##
## Get the values for user pickers with multiple selection
##################################
#macro(getRequestList $paramlist $paramname)
  #set ($paramtable = [])
  #set ($paramtable = $request.getParameterValues($paramname))
  #if ($paramtable &amp;&amp; $paramlist)
    #set ($ok = $paramlist.clear())
    #foreach($paramvalue in $paramtable)
      #set ($ok = $paramlist.add($paramvalue))
    #end
  #end
#end
##################################
##           CREATE
##
## The final step that eventually create the wiki
##################################
#macro(create)
  #if ($services.csrf.isTokenValid($request.form_token))
    #set($wikialias = $request.wikialias)
    #if("$!wikialias" == '')
      #set($wikialias = $request.wikiname)
    #end
    #set($fromTemplate = false)
    #if("$!request.template" != '' &amp;&amp; $request.template != 'xwikinotemplate')
      ## check if the wiki is already in creation
      #set ($jobId = ["wiki", "provisioning", "wikiprovisioning.template", $request.wikiname])
      #if("$!services.wiki.template.getWikiProvisioningJobStatus($jobId)" == '')
        #set($discard = $services.wiki.template.createWikiFromTemplate($request.wikiname, $wikialias, $request.template, $request.ownerId, true))
      #end
      #set($wikiDescriptor = $services.wiki.getById($request.wikiname))
      #set($fromTemplate = true)
    #else
      #set($wikiDescriptor = $services.wiki.createWiki($request.wikiname, $wikialias, $request.ownerId, true))
    #end
    #if (!$wikiDescriptor)

      {{error}}$services.localization.render('platform.wiki.create.error', [$request.wikiname, $services.wiki.lastException]){{/error}}

    #else
      ## Set the pretty name
      #set ($discard = $wikiDescriptor.setPrettyName($request.wikiprettyname))
      #set ($discard = $wikiDescriptor.setDescription($request.description))
      #set ($discard = $services.wiki.saveDescriptor($wikiDescriptor))
      ## Set the template value
      #if("$!request.set_as_template" != '')
        #set ($discard = $services.wiki.template.setTemplate($wikiDescriptor.id, true))
      #end
      #if($fromTemplate)
        #templateProvisioning($wikiDescriptor)
      #else
        #setMembers($wikiDescriptor)
      #end
    #end
  #else

    {{warning}}
      {{translation key="platform.wiki.csrf.error" /}}
    {{/warning}}
    
    #stepMembers()
  #end
#end
##################################
##        SET MEMBERS
##
## This macro set the members of the wiki
##################################
#macro(setMembers $wikiDescriptor)
  ## Set the membership type and the local users
  #set ($discard = $services.wiki.user.setUserScope($wikiDescriptor.id, $request.userScope))
  #if ($request.userScope != 'local_only')
    #set ($discard = $services.wiki.user.setMembershipType($wikiDescriptor.id, $request.membershipType))
    #set ($groupsClassName = "${wikiDescriptor.id}:XWiki.XWikiGroups")
    ## Save the members
    #set ($members = [])
    #getRequestList($members 'members')
    ## Remove empty strings from the list of members (the user picker submits by default an empty string).
    #set ($discard = $members.removeAll(['']))
    #if ("$!members" != '' &amp;&amp; $members.size() > 0)
      #set ($globalMembers = [])
      ## Enforce global users
      #foreach ($member in $members)
        #if (!$member.startsWith("${services.wiki.mainWikiId}:"))
          #set ($member = "${services.wiki.mainWikiId}:${member}")
        #end
        #set ($discard = $globalMembers.add("${member}"))
      #end
      ## Add the members
      #set ($discard = $services.wiki.user.addMembers($globalMembers, $wikiDescriptor.id))
    #end
  #end
  ## Redirect to the new wiki's homepage.
  #set ($discard = $response.sendRedirect($xwiki.getURL($wikiDescriptor.mainPageReference)))
#end
##################################
##  ADD MEMBERS AS HIDDEN INPUT
##################################
#macro(addMembersAsHiddenInput)
  ### MEMBERS VALUES
  #set ($members = [])
  #getRequestList($members 'members')
  #set($membersValue = '')
  #foreach($m in $members)
    #if($m != '')
      &lt;input type="hidden" name="members" value="$!escapetool.xml($m)" />
    #end
  #end
#end
##################################
##     TEMPLATE PROVISIONING
##
## This step display a progess bar during
## the wiki provisioning
##################################
#macro(templateProvisioning $wikiDescriptor)
  #set ($discard = $xwiki.ssfx.use('uicomponents/wizard/wizard.css', true))
  #set ($jobId = ["wiki", "provisioning", "wikiprovisioning.template", $wikiDescriptor.id])
  #set ($status = $services.wiki.template.getWikiProvisioningJobStatus($jobId))
  #set ($errors = $status.log.getLogs('ERROR'))
  #set ($hasError = ($errors.size() > 0))
  
  {{html}}
    &lt;form class="xform" method="post" action="$doc.getURL()">
    #addMembersAsHiddenInput()
    &lt;input type="hidden" name="membershipType" value="$!escapetool.xml($request.getParameter('membershipType'))" />
    &lt;input type="hidden" name="userScope" value="$!escapetool.xml($request.userScope)" />
    &lt;input type="hidden" name="wikiId" id="wikiId" value="$!escapetool.xml($wikiDescriptor.id)" />
    &lt;input type="hidden" name="csrf" id="csrf" value="$!escapetool.xml($services.csrf.getToken())" />
    #wizardHeader($services.localization.render('platform.wiki.create.wizard.step.provisioning'))
    &lt;div class="wizard-body">
      #if ($status.state == "RUNNING")
      &lt;div class="ui-progress" id="ui-progress">
        $services.localization.render('platform.wiki.create.wizard.step.provisioning.wait')
        &lt;div class="ui-progress-background">
          #set ($jobId = ["wiki", "provisioning", "wikiprovisioning.template", $wikiDescriptor.id])
          #set ($status = $services.wiki.template.getWikiProvisioningJobStatus($jobId))
          #set ($percent = $status.progress.offset)
          ## There is no progress information if the job was scheduled but hasn't started yet.
          #if (!$percent)
            #set ($percent = 0)
          #end
          #set ($percent = $mathtool.toInteger($mathtool.mul($percent, 100)))
          &lt;div class="ui-progress-bar green" style="width:${percent}%" id="template-progress-bar">&lt;/div>
        &lt;/div>
      &lt;/div>
      #end
      &lt;p class="successmessage box #if($hasError || $status.state == 'RUNNING')hidden#end" id="successMessage">
        $services.localization.render('platform.wiki.create.wizard.step.provisioning.complete')
      &lt;/p>
      &lt;p class="errormessage box #if(!$hasError || $status.state == 'RUNNING')hidden#end" id="errorMessage">
        #set($wikiURL = $xwiki.getURL($wikiDescriptor.mainPageReference))
        $services.localization.render('platform.wiki.create.wizard.step.provisioning.error', ["&lt;a href='$wikiURL'>$!escapetool.xml($wikiDescriptor.id)&lt;/a>"])
      &lt;/p>
    &lt;/div>
    #if($status.state == "FINISHED")
      #set($finalizeHidden = $hasError)
      #set($cleanUpHidden = !$hasError)
    #else
      #set($finalizeHidden = true)
      #set($cleanUpHidden = true)
    #end
    #wizardFooter('', '', '', 'finalize', $finalizeHidden, 'cleanUp', $cleanUpHidden)
    &lt;/form>
  {{/html}}

#end
##################################
##           CLEAN UP
##
## Delete the wiki if errors has occured
##################################
#macro(cleanUp)
  #set($discard = $xwiki.ssfx.use('uicomponents/wizard/wizard.css', true))
  #if("$!request.deleteOk" == '')
    #if ($services.csrf.isTokenValid($request.csrf))
      #set($wikiId = $request.wikiId)
      #set($ok = $services.wiki.deleteWiki($wikiId))
      $response.sendRedirect($doc.getURL('view', "step=cleanUp&amp;deleteOk=$ok&amp;wikiId=$wikiId"))
    #else
      {{html}}
        #wizardHeader($services.localization.render('platform.wiki.create.wizard.step.cleaningUp'))
        &lt;form action="$doc.getURL()" method="post">
        &lt;div class="wizard-body">
          &lt;p>$services.localization.render('platform.wiki.create.wizard.step.cleaningUp.confirmmessage', ["&lt;strong>$request.wikiId&lt;/strong>"])&lt;/p>
          &lt;input type="hidden" name="csrf" value="$!escapetool.xml($services.csrf.getToken())" />
          &lt;input type="hidden" name="wikiId" value="$!escapetool.xml($request.wikiId)" />
          &lt;div class="wizard-footer buttons">
            &lt;span class="buttonwrapper">
              &lt;button value="cleanUp" title="Confirm" name="step" id="cleanUp" class="button">$services.localization.render('platform.wiki.create.wizard.step.cleaningUp.confirm')&lt;/button>
            &lt;/span>
          &lt;/div>
        &lt;/div>
        &lt;/form>
       {{/html}}
    #end
  #else
    #set($wikiId = $request.wikiId)

    {{html}}
      #wizardHeader($services.localization.render('platform.wiki.create.wizard.step.cleaningUp'))
      &lt;div class="wizard-body">
        #if($request.deleteOk)
          &lt;p class="successmessage box">
            $services.localization.render('platform.wiki.create.wizard.step.cleaningup.success', ["&lt;strong>$wikiId&lt;/strong>"])
          &lt;/p>
        #else
          &lt;p class="errormessage box">
            $services.localization.render('platform.wiki.create.wizard.step.cleaningup.error', ["&lt;strong>$wikiId&lt;/strong>"])
          &lt;/p>
        #end
      &lt;/div>
      &lt;/form>
    {{/html}}

  #end
#end
{{/velocity}}
</content>
  <object>
    <name>WikiManager.CreateWiki</name>
    <number>0</number>
    <className>XWiki.JavaScriptExtension</className>
    <guid>64f76087-6318-4e80-aae7-85ccd298eb7f</guid>
    <class>
      <name>XWiki.JavaScriptExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>(function(){

  var isWikiNameSet = false;
  var isAliasSet = false;
  var lastWikiName;

  ## Error messages
  #set ($MSG_ERROR_WIKIALREADYEXISTS = "$services.localization.render('platform.wiki.create.error.wikiname.wikialreadyexists')")
  #set ($MSG_ERROR_DATABASEALREADYEXISTS = "$services.localization.render('platform.wiki.create.error.wikiname.databasealreadyexists')")
  #set ($MSG_ERROR_WIKINAMEALREADYUSED = "$services.localization.render('platform.wiki.create.error.wikiname.wikialreadyexists')")
  #set ($MSG_ERROR_WIKINAMEEMPTY = "$services.localization.render('platform.wiki.create.error.wikiname.empty')")
  #set ($MSG_ERROR_WIKIPRETTYNAMEEMPTY = "$services.localization.render('platform.wiki.create.prettyname.empty')")
  #set ($MSG_INFO_WIKINAMEVALID = "$services.localization.render('workspacemanager.wikiname.info.valid')")
  #set ($ISWIKINAMEAVAILABLE = $xwiki.getURL($services.model.createDocumentReference("", "WikiManager", "IsWikiOrDatabaseOrAvailableService")))

  /**
   * Init the event handlers
   */
  function init() {
    if ($('prettyname')) {
      initStepType();
    } else if ($('owner')) {
      initStepUsers();
    }
  }
  
  function initStepType() {
    var prettyName = $('prettyname');
    prettyName.observe('change', prettyNameChanged);
    prettyName.observe('keyup', prettyNameChanged);
    var wikiName   = $('wikiname');
    wikiName.observe('change', wikiNameChanged);
    wikiName.observe('keyup', wikiNameChanged);
    var alias      = $('wikialias');
    if (alias) {
      alias.observe('change', aliasChanged);
      alias.observe('keyup', aliasChanged);
    }
    if(prettyName.value.blank() || wikiName.value.blank()){
      $('wizard-next').disabled = true;
    }
  }

  function initStepUsers() {
    userScopeChanged();
    $$('input[type=radio][name=userScope]').each(function (item){
      item.observe('click', userScopeChanged);
    });
  }

  /**
   * Pretty name changed
   */
  function prettyNameChanged(event){
    var prettyName = $('prettyname');
    if(prettyName.value.blank()){
      $('wikiprettynamevalidation').innerHTML = "$MSG_ERROR_WIKIPRETTYNAMEEMPTY";
      prettyName.addClassName('xErrorField');
    }else{
      $('wikiprettynamevalidation').innerHTML = '';
      prettyName.removeClassName('xErrorField');
      // If the user has manually changed the wikiname, we don't generate it automaticaly anymore
      if(!isWikiNameSet){
        var wikiName = $('wikiname');
        wikiName.value = prettyName.value.replace(/[^a-zA-Z0-9]/g,'_').toLowerCase();
        validateWikiName();
      }
      if(!isAliasSet){
        var wikiAlias = $('wikialias');
        if (wikiAlias) {
          var alias = filterWikiName(prettyName.value.replace(/[^a-zA-Z0-9]/g,'_').toLowerCase());
          alias += getAliasSuffix();
          wikiAlias.value = alias;
        }
      }
    }
  }
  /**
   * Wiki name changed
   */
  function wikiNameChanged(event){
    isWikiNameSet = true;
    validateWikiName();
  }
  /**
   * Alias changed
   */
  function aliasChanged(event){
    isAliasSet = true;
  }
  /**
   * Validate the wiki name
   */
  function validateWikiName(){
    var wikiNameElement = $('wikiname');
    var wikiname = wikiNameElement.value;
    var filteredWikiName = filterWikiName(wikiname);
    if (wikiname != filteredWikiName) {
      wikiNameElement.value = filteredWikiName;
      wikiname = filteredWikiName;
    }
    if (lastWikiName == wikiname){
      return;
    }
    lastWikiName = wikiname;
    if (wikiname &amp;&amp; !wikiname.blank()) {
      var surl = "$ISWIKINAMEAVAILABLE" + "?xpage=plain&amp;outputSyntax=plain&amp;ajax=1&amp;wikiname=" + escape(wikiname);
      surl += "&amp;form_token=$!{services.csrf.getToken()}";
      new Ajax.Request(surl, {
        method: 'get',
        onSuccess: function(transport) {
          if (transport.responseText == "true") {
            $('wikinamevalidation').innerHTML = "";
            wikiNameElement.removeClassName('xErrorField');
              if (!$('prettyname').value.blank()) {
                $('wizard-next').disabled = false;
              }
          }
          else if (transport.responseText == "database"){
            $('wikinamevalidation').innerHTML = "$MSG_ERROR_DATABASEALREADYEXISTS";
            wikiNameElement.addClassName('xErrorField');
            $('wizard-next').disabled = true;
          }
          else if (transport.responseText == "wiki"){
            $('wikinamevalidation').innerHTML = "$MSG_ERROR_WIKIALREADYEXISTS";
            wikiNameElement.addClassName('xErrorField');
            $('wizard-next').disabled = true;
          }
          else{
            $('wikinamevalidation').innerHTML = "$MSG_ERROR_WIKINAMEALREADYUSED";
            wikiNameElement.addClassName('xErrorField');
            $('wizard-next').disabled = true;
          }
        }
      });
    }
    else{
      $('wikinamevalidation').innerHTML = "$MSG_ERROR_WIKINAMEEMPTY";
      $('wizard-next').disabled = true;
    }
  }
  /**
   * Filter wiki name
   */
  function filterWikiName(wikiName){
    var result = noaccent(wikiName);

    // The server-side code strips '_' chars from the database name.
    result = result.replace(/[_]/g, "");

    // Classic requirement for an identifier is to start with a letter.
    while (result.length > 0 &amp;&amp; !isNaN(result.charAt(0))) {
      result = result.substring(1);
    }

    // Out of all databases, Oracle seems to be the least permissive, limiting schema names to 30 chars.
    if (result.length > 30) {
      result = result.substring(0, 30);
    }

    // Keep IDs lowercased.
    result = result.toLowerCase();

    return result;
  }
  function getAliasSuffix() {
    var suffix = "${services.wiki.aliasSuffix}";
    if (suffix != "") {
      suffix = "." + suffix;
    } else {
      // try to compute the suffix from the request URL
      var hostname = window.location.hostname;
      if (hostname != "localhost" &amp;&amp; !hostname.match(/[0-9]{1,3}(?:\.[0-9]{1,3}){3}/g)) {
        suffix = hostname.substr(hostname.indexOf("."));
      }
    }
    return suffix;
}

  function userScopeChanged(){
    var value = $$('input:checked[type=radio][name=userScope]')[0].value
    if (value=='local_only') {
      // Disable membership type radio button
      $$('input[type=radio][name=membershipType]').each(function (item){
        item.disabled = true;
      });
      // Disable the members
      $('members').disabled = true;
    } else {
      // Enable membership type radio button
      $$('input[type=radio][name=membershipType]').each(function (item){
        item.disabled = false;
      });
      // Enable the members
      $('members').disabled = false;
    }
  };

  /**
   * Call Init
   */
  (XWiki &amp;&amp; XWiki.domIsLoaded &amp;&amp; init()) || document.observe("xwiki:dom:loaded", init);

})();</code>
    </property>
    <property>
      <name>JS</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>currentPage</use>
    </property>
  </object>
  <object>
    <name>WikiManager.CreateWiki</name>
    <number>1</number>
    <className>XWiki.JavaScriptExtension</className>
    <guid>e5f64c56-d46d-4814-905e-c1f91c13dce0</guid>
    <class>
      <name>XWiki.JavaScriptExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>var XWiki = (function (XWiki) {
// Start XWiki augmentation.
/**
 * Enhances the behaviour of an extension.
 */
XWiki.ProvisioningBar = Class.create({
  initialize : function () {
    // We run the progress bar only if the &lt;div id="ui-progress"> exists
    if ($('ui-progress')) {
      this._callRefresh.bind(this).delay(1);
    }
  },
  _callRefresh : function () {
    // Document URL
    var document = new XWiki.Document('WikiTemplateProvisioningService', 'WikiManager');
    var url = document.getURL('get', 'outputSyntax=plain');
    new Ajax.Request(url, {
      method: 'get',
      parameters : {'wikiId': $('wikiId').value},
      onSuccess : function(response) {
        var result = response.responseText.evalJSON(true);
        this._refresh(result);
      }.bind(this)
   });
  },
  _refresh : function (status) {
    if (status.status == 'FINISHED') {
      $('ui-progress').addClassName('hidden');
      // We need to know if we have error
      if (status.error.length > 0) {
        $('errorMessage').removeClassName('hidden');
        $('cleanUp').removeClassName('hidden');
      } else {
        // Success
        $('successMessage').removeClassName('hidden');
        $('finalize').removeClassName('hidden');
      }
    }
    else {
      var progress = status.progress;
      if (progress != 'null') {
        if (progress &lt; 0)
          progress = 0;
        else if (progress > 1)
          progress = 1;
        $('template-progress-bar').setStyle({width: (progress*100)+'%'});
      }
      this._callRefresh.bind(this).delay(1);
   }
  }
});

var init = function(event) {
  if ($('wikiId')) {
    new XWiki.ProvisioningBar();
  }
  return true;
};
// When the document is loaded, trigger the Extension Manager form enhancements.
(XWiki.domIsLoaded &amp;&amp; init()) || document.observe("xwiki:dom:loaded", init);

// End XWiki augmentation.
return XWiki;
}(XWiki || {}));
      </code>
    </property>
    <property>
      <name>Progress Bar JS</name>
    </property>
    <property>
      <parse>0</parse>
    </property>
    <property>
      <use>currentPage</use>
    </property>
  </object>
  <object>
    <name>WikiManager.CreateWiki</name>
    <number>0</number>
    <className>XWiki.StyleSheetExtension</className>
    <guid>15ff9185-1a9c-44a2-9cf0-13329d0b3a03</guid>
    <class>
      <name>XWiki.StyleSheetExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>#contentmenu, #hierarchy, #document-info, #xdocFooter{
  display: none;
}

#label_set_as_template, #set_as_template{
  display: inline;
  text-transform: none;
}

.whatnext{
  margin: 1em;
}</code>
    </property>
    <property>
      <name>CSS</name>
    </property>
    <property>
      <parse>0</parse>
    </property>
    <property>
      <use>currentPage</use>
    </property>
  </object>
  <object>
    <name>WikiManager.CreateWiki</name>
    <number>1</number>
    <className>XWiki.StyleSheetExtension</className>
    <guid>97f67f7f-0623-40c1-94a2-ddf78393f066</guid>
    <class>
      <name>XWiki.StyleSheetExtension</name>
      <customClass/>
      <customMapping/>
      <defaultViewSheet/>
      <defaultEditSheet/>
      <defaultWeb/>
      <nameField/>
      <validationScript/>
      <cache>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>cache</name>
        <number>5</number>
        <prettyName>Caching policy</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>long|short|default|forbid</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </cache>
      <code>
        <disabled>0</disabled>
        <name>code</name>
        <number>2</number>
        <prettyName>Code</prettyName>
        <rows>20</rows>
        <size>50</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.TextAreaClass</classType>
      </code>
      <name>
        <disabled>0</disabled>
        <name>name</name>
        <number>1</number>
        <prettyName>Name</prettyName>
        <size>30</size>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.StringClass</classType>
      </name>
      <parse>
        <disabled>0</disabled>
        <displayFormType>select</displayFormType>
        <displayType>yesno</displayType>
        <name>parse</name>
        <number>4</number>
        <prettyName>Parse content</prettyName>
        <unmodifiable>0</unmodifiable>
        <classType>com.xpn.xwiki.objects.classes.BooleanClass</classType>
      </parse>
      <use>
        <cache>0</cache>
        <disabled>0</disabled>
        <displayType>select</displayType>
        <multiSelect>0</multiSelect>
        <name>use</name>
        <number>3</number>
        <prettyName>Use this extension</prettyName>
        <relationalStorage>0</relationalStorage>
        <separator> </separator>
        <separators> ,|</separators>
        <size>1</size>
        <unmodifiable>0</unmodifiable>
        <values>currentPage=Always on this page|onDemand=On demand|always=Always on this wiki</values>
        <classType>com.xpn.xwiki.objects.classes.StaticListClass</classType>
      </use>
    </class>
    <property>
      <cache>long</cache>
    </property>
    <property>
      <code>#template('colorThemeInit.vm')

.ui-progress {
  margin-top: .5em;
}

.ui-progress-bar {
  background-image:-moz-repeating-linear-gradient(-45deg, rgba(255, 255, 255, 0.2) 0, rgba(255, 255, 255, 0.2) 5px, transparent 5px, transparent 10px);
  background-repeat: repeat;
  background-color: $theme.notificationSuccessColor !important;
  background-position: left;
  -moz-animation-duration: 0.2s;
  -moz-animation-iteration-count: infinite;
  -moz-animation-name: progress-animation;
  -moz-animation-timing-function: linear;
}

@-moz-keyframes progress-animation {
  0% {background-position: -14.142px 0;}
  100% {background-position: 0px 0;}
}

.ui-progress-background {
  background-color: transparent;
  border-radius: 8px 8px 8px 8px;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.3) inset, 0 1px 0 0 $theme.pageContentBackgroundColor;
  height: 8px;
}

.ui-progress-bar {
  background-color: $theme.backgroundSecondaryColor;
  border-radius: 8px 8px 8px 8px;
  height: 8px;
}

.ui-progress-bar.green {
  box-shadow:
    inset 0 2px 9px  rgba(255,255,255,0.3),
    inset 0 -2px 6px rgba(0,0,0,0.4);

  background-image:
     -webkit-gradient(linear, 0 0, 100% 100%,
        color-stop(.25, rgba(255, 255, 255, .2)),
        color-stop(.25, transparent), color-stop(.5, transparent),
        color-stop(.5, rgba(255, 255, 255, .2)),
        color-stop(.75, rgba(255, 255, 255, .2)),
        color-stop(.75, transparent), to(transparent)
     );

  -webkit-background-size: 50px 50px;
  -moz-background-size: 50px 50px;
}
      </code>
    </property>
    <property>
      <name>Progress Bar stylesheet</name>
    </property>
    <property>
      <parse>1</parse>
    </property>
    <property>
      <use>currentPage</use>
    </property>
  </object>
</xwikidoc>